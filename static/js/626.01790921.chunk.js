"use strict";(self.webpackChunkht=self.webpackChunkht||[]).push([[626],{25626:function(t,e,n){n.r(e),n.d(e,{default:function(){return Z}});var a=n(1413),i=n(29439),r=n(74569),u=n.n(r),c=n(72791),o=n(76770),d=n(47528),s=n(13085),l=n(87309),f=n(62213),p=n(16871),h=n(43504),g=n(35796),m=n(80184),x=o.Z.confirm;function Z(){var t=(0,p.s0)(),e=JSON.parse(localStorage.getItem("token")).username,n=(0,c.useState)([]),r=(0,i.Z)(n,2),o=r[0],Z=r[1],w={1:["\u5ba1\u6838\u4e2d","orange"],2:["\u5df2\u901a\u8fc7","green"],3:["\u672a\u901a\u8fc7","red"]},k="\u64a4\u9500",S="\u53d1\u5e03",j="\u4fee\u6539";(0,c.useEffect)((function(){u().get("/api/getNewsByAuthor",{params:{author:e}}).then((function(t){Z(t.data)}))}),[e]);var y=[{title:"\u65b0\u95fb\u6807\u9898",dataIndex:"title",width:480,render:function(t,e){return(0,m.jsx)(h.rU,{to:"/news-manage/preview/".concat(e.id),state:e,children:t})}},{title:"\u4f5c\u8005",dataIndex:"author"},{title:"\u65b0\u95fb\u5206\u7c7b",dataIndex:"categoryName"},{title:"\u5ba1\u6838\u72b6\u6001",dataIndex:"auditState",render:function(t){return(0,m.jsx)(d.Z,{color:w[t][1],children:w[t][0]})}},{title:"\u64cd\u4f5c",render:function(e){switch(e.auditState){case 1:return(0,m.jsx)(l.Z,{type:"danger",onClick:function(){x({title:"\u786e\u5b9a\u8981\u64a4\u9500\u5417\uff1f",icon:(0,m.jsx)(g.Z,{}),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){u().post("/api/updateNews",(0,a.Z)((0,a.Z)({},e),{},{auditState:0})).then((function(){s.Z.info({message:"\u64a4\u9500\u6210\u529f\uff0c\u5df2\u653e\u5165\u8349\u7a3f\u7bb1\uff01",placement:"topRight"}),Z(o.filter((function(t){return t.id!==e.id})))}))}})},children:k});case 2:return(0,m.jsx)(l.Z,{danger:!0,onClick:function(){u().post("/api/updatePublishState",{id:e.id,publishState:2,publishTime:Date.now()}).then((function(){s.Z.info({message:"\u53d1\u5e03\u6210\u529f\uff01",placement:"topRight"}),Z(o.filter((function(t){return t.id!==e.id})))}))},children:S});case 3:return(0,m.jsx)(l.Z,{type:"primary",onClick:function(){t("/news-manage/update/".concat(e.id),{state:e})},children:j});default:return(0,m.jsx)(d.Z,{children:"\u672a\u77e5\u9519\u8bef"})}}}];return(0,m.jsx)(f.Z,{dataSource:o,columns:y,rowKey:function(t){return t.id},pagination:{pageSize:5}})}}}]);
//# sourceMappingURL=626.01790921.chunk.js.map