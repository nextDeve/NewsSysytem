"use strict";(self.webpackChunkht=self.webpackChunkht||[]).push([[631],{66631:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(15861),i=n(4942),a=n(1413),c=n(29439),u=n(45987),o=n(87757),l=n.n(o),d=n(72791),s=n(76770),f=n(80570),h=n(37031),x=n(13085),p=n(87309),Z=n(62213),v=n(74569),m=n.n(v),g=n(35796),j=n(80184),k=["index"],C=["title","editable","children","dataIndex","record","handleSave"],b=d.createContext(null),w=s.Z.confirm,y=function(e){e.index;var t=(0,u.Z)(e,k),n=f.Z.useForm(),r=(0,c.Z)(n,1)[0];return(0,j.jsx)(f.Z,{form:r,component:!1,children:(0,j.jsx)(b.Provider,{value:r,children:(0,j.jsx)("tr",(0,a.Z)({},t))})})},I=function(e){var t=e.title,n=e.editable,o=e.children,s=e.dataIndex,x=e.record,p=e.handleSave,Z=(0,u.Z)(e,C),v=(0,d.useState)(!1),m=(0,c.Z)(v,2),g=m[0],k=m[1],w=(0,d.useRef)(null),y=(0,d.useContext)(b);(0,d.useEffect)((function(){g&&w.current.focus()}),[g]);var I=function(){k(!g),y.setFieldsValue((0,i.Z)({},s,x[s]))},S=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.validateFields();case 3:t=e.sent,I(),p((0,a.Z)((0,a.Z)({},x),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),E=o;return n&&(E=g?(0,j.jsx)(f.Z.Item,{style:{margin:0},name:s,rules:[{required:!0,message:"".concat(t," is required.")}],children:(0,j.jsx)(h.Z,{ref:w,onPressEnter:S,onBlur:S})}):(0,j.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:I,children:o})),(0,j.jsx)("td",(0,a.Z)((0,a.Z)({},Z),{},{children:E}))};function S(){var e=(0,d.useState)([]),t=(0,c.Z)(e,2),n=t[0],r=t[1],i={body:{row:y,cell:I}};(0,d.useEffect)((function(){m().get("/api/getCategories").then((function(e){r(e.data)}))}),[]);var a=function(e){r(n.map((function(t){return t.id===e.id?e:t}))),m().post("/api/updateCategory",e)},u=[{title:"ID",dataIndex:"id"},{title:"\u680f\u76ee\u540d\u79f0",dataIndex:"title",width:600,onCell:function(e){return{record:e,editable:!0,dataIndex:"title",title:"\u680f\u76ee\u540d\u79f0",handleSave:a}}},{title:"\u64cd\u4f5c",render:function(e){return(0,j.jsx)(p.Z,{danger:!0,onClick:function(){w({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",icon:(0,j.jsx)(g.Z,{}),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){m().post("/api/deleteCategory",{id:e.id}).then((function(){r(n.filter((function(t){return t.id!==e.id}))),x.Z.info({message:"\u5220\u9664\u6210\u529f\uff01",placement:"topRight"})}))}})},children:"\u5220\u9664"})}}];return(0,j.jsx)(Z.Z,{dataSource:n,columns:u,rowKey:function(e){return e.id},components:i})}}}]);
//# sourceMappingURL=631.f58af5d4.chunk.js.map