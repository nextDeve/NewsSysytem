"use strict";(self.webpackChunkht=self.webpackChunkht||[]).push([[352],{79110:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n(29439),r=n(72791),a=n(51802),o=n(72010),s=n(199),c=n.n(s),l=n(1701),u=n.n(l),d=(n(25646),n(80184));var p=function(e){var t=(0,r.useState)(o.EditorState.createEmpty()),n=(0,i.Z)(t,2),s=n[0],l=n[1];return(0,r.useEffect)((function(){if(e.content){var t=u()(e.content),n=o.ContentState.createFromBlockArray(t.contentBlocks),i=o.EditorState.createWithContent(n);l(i)}}),[e.content]),(0,d.jsx)(a.Editor,{editorState:s,wrapperClassName:"wrapper-editer",editorClassName:"editor",onEditorStateChange:function(e){return l(e)},onBlur:function(){e.getContent(c()((0,o.convertToRaw)(s.getCurrentContent())))}})}},48352:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var i=n(1413),r=n(29439),a=n(72791),o=n(63503),s=n(83734),c=n(23695),l=n(13085),u=n(81477),d=n(80570),p=n(37031),f=n(87309),h=n(74569),Z=n.n(h),x=n(16871),j=n(79110),m=n(80184),g=o.Z.Step,C=s.Z.Option;function v(){var e=(0,a.useState)(0),t=(0,r.Z)(e,2),n=t[0],h=t[1],v=(0,x.TH)(),y=(0,a.useState)([]),k=(0,r.Z)(y,2),S=k[0],b=k[1],w=(0,a.useState)(v.state),E=(0,r.Z)(w,2),T=E[0],N=E[1],B=(0,a.createRef)(),I=(0,x.s0)();(0,a.useEffect)((function(){Z().get("/api/getCategories").then((function(e){b(e.data)}))}),[]);var R=function(e){Z().post("/api/updateNews",(0,i.Z)((0,i.Z)({},T),{},{auditState:e})).then((function(){l.Z.info({message:"\u63d0\u4ea4/\u4fdd\u5b58\u6210\u529f\uff01",placement:"topRight"}),I(0===e?"/news-manage/draft":"/audit-manage/list")}))};return(0,m.jsxs)("div",{children:[(0,m.jsx)(u.Z,{className:"site-page-header",title:"\u64b0\u5199\u65b0\u95fb"}),(0,m.jsxs)(o.Z,{current:n,children:[(0,m.jsx)(g,{title:"\u57fa\u672c\u4fe1\u606f",description:"\u65b0\u95fb\u6807\u9898\uff0c\u65b0\u95fb\u5206\u7c7b"}),(0,m.jsx)(g,{title:"\u65b0\u95fb\u4e3b\u4f53",description:"\u65b0\u95fb\u4e3b\u9898\u5185\u5bb9"}),(0,m.jsx)(g,{title:"\u65b0\u95fb\u63d0\u4ea4",description:"\u4fdd\u5b58\u8349\u7a3f\u6216\u63d0\u4ea4\u5ba1\u6838"})]}),(0,m.jsx)("div",{style:{display:0===n?"block":"none",marginTop:"20px"},children:(0,m.jsxs)(d.Z,(0,i.Z)((0,i.Z)({},{labelCol:{span:3},wrapperCol:{span:21}}),{},{ref:B,initialValues:T,children:[(0,m.jsx)(d.Z.Item,{label:"\u65b0\u95fb\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898\uff01"}],children:(0,m.jsx)(p.Z,{})}),(0,m.jsx)(d.Z.Item,{label:"\u65b0\u95fb\u5206\u7c7b",name:"categoryId",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u65b0\u95fb\u5206\u7c7b"}],children:(0,m.jsx)(s.Z,{children:S.map((function(e){return(0,m.jsx)(C,{value:e.id,children:e.title},e.id)}))})})]}))}),(0,m.jsx)("div",{style:{display:1===n?"block":"none",marginTop:"20px",height:"350px"},children:(0,m.jsx)(j.Z,{getContent:function(e){N((0,i.Z)((0,i.Z)({},T),{},{content:e}))},content:T.content})}),(0,m.jsx)("div",{style:{display:2===n?"block":"none"}}),(0,m.jsxs)("div",{style:{marginTop:"80px"},children:[n<2&&(0,m.jsx)(f.Z,{type:"primary",onClick:function(){0===n?B.current.validateFields().then((function(e){N((0,i.Z)((0,i.Z)({},T),e)),h(n+1)})).catch((function(){console.log("error")})):""===T.content||"<p></p>"===T.content.trim()?c.ZP.error("\u65b0\u95fb\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\uff01"):h(n+1)},children:"\u4e0b\u4e00\u6b65"}),2===n&&(0,m.jsx)(f.Z,{type:"primary",onClick:function(){R(0)},children:"\u4fdd\u5b58\u8349\u7a3f"}),2===n&&(0,m.jsx)(f.Z,{type:"danger",onClick:function(){R(1)},children:"\u63d0\u4ea4\u5ba1\u6838"}),n>0&&(0,m.jsx)(f.Z,{onClick:function(){h(n-1)},children:"\u4e0a\u4e00\u6b65"})]})]})}}}]);
//# sourceMappingURL=352.d3b6d379.chunk.js.map