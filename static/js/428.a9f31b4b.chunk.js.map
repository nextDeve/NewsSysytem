{"version":3,"file":"static/js/428.a9f31b4b.chunk.js","mappings":"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","sources":["components/UserForm/index.jsx","views/NewsSandBox/user-manage/UserList/index.jsx","../node_modules/@ant-design/icons-svg/es/asn/DeleteOutlined.js","../node_modules/@ant-design/icons/es/icons/DeleteOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/EditOutlined.js","../node_modules/@ant-design/icons/es/icons/EditOutlined.js","../node_modules/rc-switch/es/index.js","../node_modules/antd/es/switch/index.js","../node_modules/nanoid/index.browser.js"],"sourcesContent":["import { forwardRef, useState, useEffect } from 'react'\r\nimport { Form, Input, Select } from 'antd'\r\nconst { Option } = Select\r\nconst UserForm = forwardRef((props, ref) => {\r\n    const [isDisable, setIsDisable] = useState(false)\r\n\r\n    const { item, regions, roles } = props\r\n    const { roleId, region } = JSON.parse(localStorage.getItem('token'))\r\n    useEffect(() => {\r\n        setIsDisable(roleId === 1 ? false : true)\r\n        if (ref) { ref.current.setFieldsValue(item) }\r\n        if (!item) { ref.current.setFieldsValue({ region }) }\r\n    }, [item, ref, roleId, region])\r\n\r\n    const checkAdduserRoleTypeRights = (id) => {\r\n        if (roleId === 1) return false\r\n        else {\r\n            if (roleId < id) return false\r\n            else return true\r\n        }\r\n    }\r\n    return (\r\n        <Form layout='vertical' ref={ref}>\r\n            <Form.Item name='username' label='用户名' rules={[{ required: true }]} >\r\n                <Input></Input>\r\n            </Form.Item>\r\n            <Form.Item name='password' label='密码' rules={[{ required: true }]} >\r\n                <Input ></Input>\r\n            </Form.Item>\r\n            <Form.Item name='region' label='地区' rules={isDisable ? [] : [{ required: true }]} >\r\n                <Select disabled={isDisable} >\r\n                    {regions.map((item) => {\r\n                        return <Option value={item.value} key={item.id}> {item.title}</Option>\r\n                    })}\r\n                </Select>\r\n            </Form.Item>\r\n            <Form.Item name='roleId' label='角色' rules={[{ required: true }]} >\r\n                <Select onChange={(value) => {\r\n                    if (value === 1) {\r\n                        setIsDisable(true)\r\n                        ref.current.setFieldsValue({ region: '' })\r\n                    }\r\n                    else {\r\n                        if (roleId !== 1) setIsDisable(true)\r\n                        else setIsDisable(false)\r\n                    }\r\n                }}>\r\n                    {roles.map((item) => {\r\n                        return <Option value={item.roleType} key={item.id} disabled={checkAdduserRoleTypeRights(item.roleType)}>\r\n                            {item.roleName}\r\n                        </Option>\r\n                    })}\r\n                </Select>\r\n            </Form.Item>\r\n        </Form>\r\n    )\r\n})\r\nexport default UserForm\r\n\r\n","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { nanoid } from 'nanoid'\r\nimport { Button, Switch, Table, Modal } from 'antd'\r\nimport { DeleteOutlined, EditOutlined, ExclamationCircleOutlined } from '@ant-design/icons'\r\nimport UserForm from '../../../../components/UserForm'\r\nconst { confirm } = Modal\r\nexport default function UserList() {\r\n  const [dataSource, setDataSource] = useState([])\r\n  const [isAddVisible, setIsAddVisible] = useState(false)\r\n  const [isEditVisible, setIsEditVisible] = useState(false)\r\n  const [roles, setRoles] = useState([])\r\n  const [regions, setRegions] = useState([])\r\n  const [currentItem, setCurrentItem] = useState({})\r\n  const AddRef = React.createRef()\r\n  const EditRef = React.createRef()\r\n  const columns = [\r\n    {\r\n      title: '区域',\r\n      dataIndex: 'region',\r\n      render: (region) => {\r\n        return <b>{region === '' ? '全球' : region}</b>\r\n      },\r\n      filters: [{\r\n        text: '全球',\r\n        value: ''\r\n      }, ...regions.map((item) => ({\r\n        text: item.title,\r\n        value: item.value\r\n      }))],\r\n      onFilter: (value, item) => item.region === value\r\n    },\r\n    {\r\n      title: '角色名称',\r\n      dataIndex: 'roleType'\r\n    },\r\n    {\r\n      title: '用户名',\r\n      dataIndex: 'username'\r\n    },\r\n    {\r\n      title: '用户状态',\r\n      dataIndex: 'roleState',\r\n      render: (roleState, item) => {\r\n        const changeState = (checked) => {\r\n          let list = dataSource.filter((data) => data.id === item.id)\r\n          list[0].roleState = checked\r\n          axios.post('/api/changeUserState', { id: item.id, value: checked }).then(() => setDataSource([...dataSource]))\r\n        }\r\n        return <Switch checked={roleState} disabled={item.default} onChange={changeState}></Switch>\r\n      }\r\n    },\r\n    {\r\n      title: '操作',\r\n      render: (item) => {\r\n        const deleteUser = () => {\r\n          confirm({\r\n            title: '确定要删除吗？',\r\n            icon: <ExclamationCircleOutlined />,\r\n            okText: '确认',\r\n            cancelText: '取消',\r\n            onOk() {\r\n              axios.post('/api/deleteUser', { id: item.id }).then(() => {\r\n                setDataSource(dataSource.filter(data => data.id !== item.id))\r\n              }).catch(() => console.log('Delete role failed'))\r\n            },\r\n          });\r\n        }\r\n        const editUser = () => {\r\n          setIsEditVisible(true)\r\n          setCurrentItem({ ...item })\r\n        }\r\n        return <div>\r\n          <Button type='primary' icon={<EditOutlined />}\r\n            style={{ marginRight: '10px' }}\r\n            disabled={item.default}\r\n            onClick={editUser}\r\n          >\r\n          </Button>\r\n          <Button type='danger' icon={<DeleteOutlined />} onClick={deleteUser} disabled={item.default}></Button>\r\n        </div>\r\n      }\r\n    }\r\n  ]\r\n\r\n  const { roleId, region } = JSON.parse(localStorage.getItem('token'))\r\n  useEffect(() => {\r\n    axios.post('/api/getUserInfo', { roleId: roleId, region: region }).then(res => setDataSource(res.data))\r\n    axios.get('/api/getRoleList').then(res => setRoles(res.data))\r\n    axios.get('/api/getRegionInfo').then(res => setRegions(res.data))\r\n  }, [roleId, region])\r\n  const handleAddOk = () => {\r\n    AddRef.current.validateFields().then(res => {\r\n      setIsAddVisible(false)\r\n      let newUser = { ...res, id: nanoid(), roleState: true, default: false }\r\n      axios.post('/api/addUser', newUser)\r\n      let roleType = roles.filter(data => data.id === newUser.roleId)[0].roleName\r\n      setDataSource([...dataSource, { ...newUser, roleType }])\r\n    }).catch(error => console.log(error))\r\n  }\r\n  const handleAddCancel = () => {\r\n    setIsAddVisible(false)\r\n  }\r\n  const handleEditOk = () => {\r\n    EditRef.current.validateFields().then((value) => {\r\n      let newUser = { ...currentItem, ...value }\r\n      setDataSource(dataSource.map((item) => {\r\n        if (item.id === currentItem.id) return newUser;\r\n        else return item\r\n      }))\r\n      setIsEditVisible(false)\r\n      axios.post('/api/updateUser', newUser)\r\n    })\r\n  }\r\n  const handleEditCancel = () => setIsEditVisible(false)\r\n  return (\r\n    <div>\r\n      <Button type='primary' style={{ marginBottom: '10px' }} onClick={() => setIsAddVisible(true)}>添加用户</Button>\r\n      <Table dataSource={dataSource} columns={columns} rowKey={item => item.id} pagination={{ pageSize: 5 }}></Table>\r\n\r\n      <Modal title=\"添加用户\" visible={isAddVisible} onOk={handleAddOk} onCancel={handleAddCancel}>\r\n        <UserForm roles={roles} regions={regions} ref={AddRef}></UserForm>\r\n      </Modal>\r\n\r\n      <Modal title=\"修改用户\" visible={isEditVisible} onOk={handleEditOk} onCancel={handleEditCancel}>\r\n        <UserForm roles={roles} regions={regions} ref={EditRef} item={currentItem}></UserForm>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n","// This icon file is generated automatically.\nvar DeleteOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\" } }] }, \"name\": \"delete\", \"theme\": \"outlined\" };\nexport default DeleteOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DeleteOutlinedSvg from \"@ant-design/icons-svg/es/asn/DeleteOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DeleteOutlined = function DeleteOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: DeleteOutlinedSvg\n  }));\n};\n\nDeleteOutlined.displayName = 'DeleteOutlined';\nexport default /*#__PURE__*/React.forwardRef(DeleteOutlined);","// This icon file is generated automatically.\nvar EditOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z\" } }] }, \"name\": \"edit\", \"theme\": \"outlined\" };\nexport default EditOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport EditOutlinedSvg from \"@ant-design/icons-svg/es/asn/EditOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar EditOutlined = function EditOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: EditOutlinedSvg\n  }));\n};\n\nEditOutlined.displayName = 'EditOutlined';\nexport default /*#__PURE__*/React.forwardRef(EditOutlined);","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nvar Switch = React.forwardRef(function (_ref, ref) {\n  var _classNames;\n\n  var _ref$prefixCls = _ref.prefixCls,\n      prefixCls = _ref$prefixCls === void 0 ? 'rc-switch' : _ref$prefixCls,\n      className = _ref.className,\n      checked = _ref.checked,\n      defaultChecked = _ref.defaultChecked,\n      disabled = _ref.disabled,\n      loadingIcon = _ref.loadingIcon,\n      checkedChildren = _ref.checkedChildren,\n      unCheckedChildren = _ref.unCheckedChildren,\n      onClick = _ref.onClick,\n      onChange = _ref.onChange,\n      onKeyDown = _ref.onKeyDown,\n      restProps = _objectWithoutProperties(_ref, [\"prefixCls\", \"className\", \"checked\", \"defaultChecked\", \"disabled\", \"loadingIcon\", \"checkedChildren\", \"unCheckedChildren\", \"onClick\", \"onChange\", \"onKeyDown\"]);\n\n  var _useMergedState = useMergedState(false, {\n    value: checked,\n    defaultValue: defaultChecked\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      innerChecked = _useMergedState2[0],\n      setInnerChecked = _useMergedState2[1];\n\n  function triggerChange(newChecked, event) {\n    var mergedChecked = innerChecked;\n\n    if (!disabled) {\n      mergedChecked = newChecked;\n      setInnerChecked(mergedChecked);\n      onChange === null || onChange === void 0 ? void 0 : onChange(mergedChecked, event);\n    }\n\n    return mergedChecked;\n  }\n\n  function onInternalKeyDown(e) {\n    if (e.which === KeyCode.LEFT) {\n      triggerChange(false, e);\n    } else if (e.which === KeyCode.RIGHT) {\n      triggerChange(true, e);\n    }\n\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(e);\n  }\n\n  function onInternalClick(e) {\n    var ret = triggerChange(!innerChecked, e); // [Legacy] trigger onClick with value\n\n    onClick === null || onClick === void 0 ? void 0 : onClick(ret, e);\n  }\n\n  var switchClassName = classNames(prefixCls, className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-checked\"), innerChecked), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _classNames));\n  return React.createElement(\"button\", Object.assign({}, restProps, {\n    type: \"button\",\n    role: \"switch\",\n    \"aria-checked\": innerChecked,\n    disabled: disabled,\n    className: switchClassName,\n    ref: ref,\n    onKeyDown: onInternalKeyDown,\n    onClick: onInternalClick\n  }), loadingIcon, React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-inner\")\n  }, innerChecked ? checkedChildren : unCheckedChildren));\n});\nSwitch.displayName = 'Switch';\nexport default Switch;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport RcSwitch from 'rc-switch';\nimport classNames from 'classnames';\nimport LoadingOutlined from \"@ant-design/icons/es/icons/LoadingOutlined\";\nimport Wave from '../_util/wave';\nimport { ConfigContext } from '../config-provider';\nimport SizeContext from '../config-provider/SizeContext';\nimport devWarning from '../_util/devWarning';\nvar Switch = /*#__PURE__*/React.forwardRef(function (_a, ref) {\n  var _classNames;\n\n  var customizePrefixCls = _a.prefixCls,\n      customizeSize = _a.size,\n      loading = _a.loading,\n      _a$className = _a.className,\n      className = _a$className === void 0 ? '' : _a$className,\n      disabled = _a.disabled,\n      props = __rest(_a, [\"prefixCls\", \"size\", \"loading\", \"className\", \"disabled\"]);\n\n  devWarning('checked' in props || !('value' in props), 'Switch', '`value` is not a valid prop, do you mean `checked`?');\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var size = React.useContext(SizeContext);\n  var prefixCls = getPrefixCls('switch', customizePrefixCls);\n  var loadingIcon = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-handle\")\n  }, loading && /*#__PURE__*/React.createElement(LoadingOutlined, {\n    className: \"\".concat(prefixCls, \"-loading-icon\")\n  }));\n  var classes = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-small\"), (customizeSize || size) === 'small'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-loading\"), loading), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n  return /*#__PURE__*/React.createElement(Wave, {\n    insertExtraNode: true\n  }, /*#__PURE__*/React.createElement(RcSwitch, _extends({}, props, {\n    prefixCls: prefixCls,\n    className: classes,\n    disabled: disabled || loading,\n    ref: ref,\n    loadingIcon: loadingIcon\n  })));\n});\nSwitch.__ANT_SWITCH = true;\nSwitch.displayName = 'Switch';\nexport default Switch;","import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n  while (size--) {\n    let byte = bytes[size] & 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte < 63) {\n      id += '_'\n    } else {\n      id += '-'\n    }\n  }\n  return id\n}\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n"],"names":["Option","Select","forwardRef","props","ref","useState","isDisable","setIsDisable","item","regions","roles","JSON","parse","localStorage","getItem","roleId","region","useEffect","current","setFieldsValue","layout","name","label","rules","required","disabled","map","value","title","id","onChange","roleType","roleName","confirm","Modal","UserList","dataSource","setDataSource","isAddVisible","setIsAddVisible","isEditVisible","setIsEditVisible","setRoles","setRegions","currentItem","setCurrentItem","AddRef","React","EditRef","columns","dataIndex","render","filters","text","onFilter","roleState","checked","default","filter","data","axios","then","type","icon","EditOutlined","style","marginRight","onClick","DeleteOutlined","ExclamationCircleOutlined","okText","cancelText","onOk","catch","console","log","res","marginBottom","rowKey","pagination","pageSize","visible","validateFields","newUser","nanoid","error","onCancel","AntdIcon","_objectSpread","DeleteOutlinedSvg","displayName","EditOutlinedSvg","Switch","_ref","_classNames","_ref$prefixCls","prefixCls","className","defaultChecked","loadingIcon","checkedChildren","unCheckedChildren","onKeyDown","restProps","_objectWithoutProperties","_useMergedState","useMergedState","defaultValue","_useMergedState2","_slicedToArray","innerChecked","setInnerChecked","triggerChange","newChecked","event","mergedChecked","switchClassName","classNames","_defineProperty","concat","Object","assign","role","e","which","KeyCode","ret","__rest","s","t","p","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","_a","customizePrefixCls","customizeSize","size","loading","_a$className","devWarning","_React$useContext","ConfigContext","getPrefixCls","direction","SizeContext","LoadingOutlined","classes","Wave","insertExtraNode","RcSwitch","_extends","__ANT_SWITCH","bytes","crypto","getRandomValues","Uint8Array","byte","toString","toUpperCase"],"sourceRoot":""}