{"version":3,"file":"static/js/742.c736506e.chunk.js","mappings":"yPAIe,SAASA,IACtB,MAA2BC,KAAKC,MAAMC,aAAaC,QAAQ,UAAnDC,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,OAChB,GAAsBC,EAAAA,EAAAA,UAAS,IAA/B,eAAKC,EAAL,KAAWC,EAAX,MACAC,EAAAA,EAAAA,YAAU,WACRC,IAAAA,IAAU,sBAAuB,CAAEC,OAAQ,CAAEN,OAAAA,EAAQD,OAAAA,KAAYQ,MAAK,SAACC,GACrEL,EAAQK,EAAIC,MACZC,QAAQC,IAAIH,QAEb,CAACT,EAAQC,IACZ,IAAMY,EAAU,CACd,CACEC,MAAO,2BACPC,UAAW,QACXC,MAAO,IACPC,OAAQ,SAACH,EAAOI,GACd,OAAO,SAAC,KAAD,CAAMC,GAAE,+BAA0BD,EAAKE,IAAMC,MAAOH,EAApD,SAA2DJ,MAGtE,CACEA,MAAO,eACPC,UAAW,UAEb,CACED,MAAO,2BACPC,UAAW,gBAEb,CACED,MAAO,eACPG,OAAQ,SAACC,GACP,IAAMI,EAAe,SAACD,GACpB,IAAIE,EAAyB,IAAVF,EAAc,EAAI,EACrCf,IAAAA,KAAW,oBAAX,kBAAoCY,GAApC,IAA0CM,WAAYH,EAAOE,aAAAA,KAAgBf,MAAK,WAChFiB,EAAAA,EAAAA,KAAkB,CAChBC,QAAS,iCACTC,UAAW,aAEbvB,EAAQD,EAAKyB,QAAO,SAAClB,GAAD,OAAUA,EAAKU,KAAOF,EAAKE,WAGnD,OAAO,4BACL,SAAC,IAAD,CAAQS,KAAK,SAASC,MAAO,CAAEC,YAAa,QAAUC,QAAS,kBAAMV,EAAa,IAAlF,2BACA,SAAC,IAAD,CAAQO,KAAK,UAAUG,QAAS,kBAAMV,EAAa,IAAnD,gCAKR,OACE,SAAC,IAAD,CAAOW,WAAY9B,EAAMU,QAASA,EAASqB,OAAQ,SAAAhB,GAAI,OAAIA,EAAKJ,OAAOqB,WAAY,CAAEC,SAAU","sources":["views/NewsSandBox/audit-manage/Audit/index.jsx"],"sourcesContent":["import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Button, Table, notification } from 'antd'\r\nexport default function Audit() {\r\n  const { region, roleId } = JSON.parse(localStorage.getItem('token'))\r\n  let [news, setNews] = useState([])\r\n  useEffect(() => {\r\n    axios.get('/api/getNewsToAudit', { params: { roleId, region } }).then((res) => {\r\n      setNews(res.data)\r\n      console.log(res);\r\n    })\r\n  }, [region, roleId])\r\n  const columns = [\r\n    {\r\n      title: '新闻标题',\r\n      dataIndex: 'title',\r\n      width: 480,\r\n      render: (title, item) => {\r\n        return <Link to={`/news-manage/preview/${item.id}`} state={item}>{title}</Link>\r\n      }\r\n    },\r\n    {\r\n      title: '作者',\r\n      dataIndex: 'author'\r\n    },\r\n    {\r\n      title: '新闻分类',\r\n      dataIndex: 'categoryName'\r\n    },\r\n    {\r\n      title: '操作',\r\n      render: (item) => {\r\n        const handelUpdate = (state) => {\r\n          let publishState = state === 2 ? 1 : 0\r\n          axios.post('./api/updateNews', { ...item, auditState: state, publishState }).then(() => {\r\n            notification.info({\r\n              message: '审核成功！',\r\n              placement: 'topRight',\r\n            });\r\n            setNews(news.filter((data) => data.id !== item.id))\r\n          })\r\n        }\r\n        return <div>\r\n          <Button type='danger' style={{ marginRight: '10px' }} onClick={() => handelUpdate(3)}>驳回</Button>\r\n          <Button type='primary' onClick={() => handelUpdate(2)}>通过</Button>\r\n        </div>\r\n      }\r\n    }\r\n  ]\r\n  return (\r\n    <Table dataSource={news} columns={columns} rowKey={item => item.title} pagination={{ pageSize: 5 }}></Table>\r\n  )\r\n}\r\n"],"names":["Audit","JSON","parse","localStorage","getItem","region","roleId","useState","news","setNews","useEffect","axios","params","then","res","data","console","log","columns","title","dataIndex","width","render","item","to","id","state","handelUpdate","publishState","auditState","notification","message","placement","filter","type","style","marginRight","onClick","dataSource","rowKey","pagination","pageSize"],"sourceRoot":""}