{"version":3,"file":"static/js/131.34f3f1fe.chunk.js","mappings":"qKACe,SAASA,IACtB,OACE,0BACE,SAAC,IAAD,CAAwBC,aAAc,Q,2LCCpCC,EAAYC,EAAAA,EAAAA,QAGL,SAASC,EAAuBC,GAC3C,OAAkCC,EAAAA,EAAAA,UAAS,IAA3C,eAAKC,EAAL,KAAiBC,EAAjB,KACA,EAAqCC,KAAKC,MAAMC,aAAaC,QAAQ,UAA7DC,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,OAAQC,EAA1B,EAA0BA,OACpBC,EAAW,CACb,EAAG,eACH,EAAG,eACH,EAAG,iBAEPC,EAAAA,EAAAA,YAAU,WACNC,IAAAA,KAAW,8BAA+B,CAAEL,SAAAA,EAAUC,OAAAA,EAAQC,OAAAA,EAAQd,aAAcI,EAAMJ,eAAgBkB,MAAK,SAACC,GAC5GZ,EAAcY,EAAIC,WAEvB,CAACR,EAAUC,EAAQC,EAAQV,EAAMJ,eACpC,IAAMqB,EAAU,CACZ,CACIC,MAAO,KACPC,UAAW,KACXC,MAAO,IACPC,OAAQ,SAACC,GACL,OAAO,uBAAIA,MAGnB,CACIJ,MAAO,2BACPC,UAAW,QACXC,MAAO,IACPC,OAAQ,SAACH,EAAOK,GACZ,OAAO,SAAC,KAAD,CAAMC,GAAE,+BAA0BD,EAAKD,IAAMG,MAAOF,EAApD,SAA2DL,MAG1E,CACIA,MAAO,eACPC,UAAW,UAEf,CACID,MAAO,eACPC,UAAW,gBAEf,CACID,MAAO,eACPG,OAAQ,SAACE,GAoBL,OAAO,0BACH,SAAC,IAAD,CAAQG,KAAK,UAAUC,MAAO,CAAEC,YAAa,QAAUC,QApBzC,WACdhC,EAAQ,CACJqB,MAAM,qBAAD,OAAQP,EAASX,EAAMJ,cAAvB,gBACLkC,MAAM,SAAC,IAAD,IACNC,OAAQ,eACRC,WAAY,eACZC,KALI,WAMA,IAAIC,EAAkC,IAAvBlC,EAAMJ,aAAqB,CAAEA,aAAc,GAAM,CAAEA,aAAc,EAAGuC,YAAaC,KAAKC,OACrGxB,IAAAA,KAAW,mBAAX,kBAAmCU,GAASW,IAAYpB,MAAK,WACzDX,EAAcD,EAAWoC,QAAO,SAAAtB,GAAI,OAAIA,EAAKM,KAAOC,EAAKD,OACzDiB,EAAAA,EAAAA,KAAkB,CACdC,QAAQ,GAAD,OAAK7B,EAASX,EAAMJ,cAApB,sBACP6C,UAAW,oBAQ3B,SACK9B,EAASX,EAAMJ,qBAMpC,OACI,0BACI,SAAC,IAAD,CAAOqB,QAASA,EAASf,WAAYA,EAAYwC,WAAY,CAAEC,SAAU,GAAKC,OAAO","sources":["views/NewsSandBox/publish-manage/Published/index.jsx","views/NewsSandBox/publish-manage/UpdateNewsPublishState/index.jsx"],"sourcesContent":["import UpdateNewsPublishState from '../UpdateNewsPublishState'\r\nexport default function Published() {\r\n  return (\r\n    <div>\r\n      <UpdateNewsPublishState publishState={2}></UpdateNewsPublishState>\r\n    </div>)\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Table, Button, Modal, notification } from 'antd'\r\nimport axios from 'axios';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons'\r\nimport { Link } from 'react-router-dom';\r\nconst { confirm } = Modal\r\n\r\n\r\nexport default function UpdateNewsPublishState(props) {\r\n    let [dataSource, setDataSource] = useState([])\r\n    const { username, region, roleId } = JSON.parse(localStorage.getItem('token'))\r\n    const stateMap = {\r\n        2: '下线',\r\n        1: '发布',\r\n        3: '上线'\r\n    }\r\n    useEffect(() => {\r\n        axios.post('/api/getNewsByStateAndRight', { username, region, roleId, publishState: props.publishState }).then((res) => {\r\n            setDataSource(res.data)\r\n        })\r\n    }, [username, region, roleId, props.publishState])\r\n    const columns = [\r\n        {\r\n            title: 'Id',\r\n            dataIndex: 'id',\r\n            width: 240,\r\n            render: (id) => {\r\n                return <b>{id}</b>\r\n            }\r\n        },\r\n        {\r\n            title: '新闻标题',\r\n            dataIndex: 'title',\r\n            width: 480,\r\n            render: (title, item) => {\r\n                return <Link to={`/news-manage/preview/${item.id}`} state={item}>{title}</Link>\r\n            }\r\n        },\r\n        {\r\n            title: '作者',\r\n            dataIndex: 'author',\r\n        },\r\n        {\r\n            title: '分类',\r\n            dataIndex: 'categoryName',\r\n        },\r\n        {\r\n            title: '操作',\r\n            render: (item) => {\r\n                const updateNew = () => {\r\n                    confirm({\r\n                        title: `确定要${stateMap[props.publishState]}吗？`,\r\n                        icon: <ExclamationCircleOutlined />,\r\n                        okText: '确认',\r\n                        cancelText: '取消',\r\n                        onOk() {\r\n                            let newState = props.publishState === 2 ? { publishState: 3 } : { publishState: 2, publishTime: Date.now() }\r\n                            axios.post('/api/updateNews', { ...item, ...newState }).then(() => {\r\n                                setDataSource(dataSource.filter(data => data.id !== item.id))\r\n                                notification.info({\r\n                                    message: `${stateMap[props.publishState]}成功！`,\r\n                                    placement: 'topRight',\r\n                                });\r\n                            })\r\n                        },\r\n                    });\r\n                }\r\n\r\n                return <div>\r\n                    <Button type='primary' style={{ marginRight: '10px' }} onClick={updateNew}>\r\n                        {stateMap[props.publishState]}\r\n                    </Button>\r\n                </div>\r\n            }\r\n        }\r\n    ];\r\n    return (\r\n        <div>\r\n            <Table columns={columns} dataSource={dataSource} pagination={{ pageSize: 5 }} rowKey='id' />\r\n        </div>)\r\n}\r\n"],"names":["Published","publishState","confirm","Modal","UpdateNewsPublishState","props","useState","dataSource","setDataSource","JSON","parse","localStorage","getItem","username","region","roleId","stateMap","useEffect","axios","then","res","data","columns","title","dataIndex","width","render","id","item","to","state","type","style","marginRight","onClick","icon","okText","cancelText","onOk","newState","publishTime","Date","now","filter","notification","message","placement","pagination","pageSize","rowKey"],"sourceRoot":""}