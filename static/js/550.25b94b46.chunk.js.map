{"version":3,"file":"static/js/550.25b94b46.chunk.js","mappings":"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","sources":["views/NewsSandBox/right-manage/RoleList/index.jsx","../node_modules/@ant-design/icons-svg/es/asn/DeleteOutlined.js","../node_modules/@ant-design/icons/es/icons/DeleteOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/EditOutlined.js","../node_modules/@ant-design/icons/es/icons/EditOutlined.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Table, Button, Modal, Tree } from 'antd'\r\nimport axios from 'axios'\r\nimport { DeleteOutlined, EditOutlined, ExclamationCircleOutlined } from '@ant-design/icons'\r\nlet { confirm } = Modal\r\nexport default function RoleList() {\r\n  const [dataSource, setDataSource] = useState([])\r\n  const [isShow, setIsShow] = useState(false)\r\n  const [treeData, setTreeData] = useState([])\r\n  const [current, setCurrent] = useState([])\r\n  const [currentId, setCurrentId] = useState(0)\r\n  useEffect(() => {\r\n    axios.get('/api/getRoleList').then((response) => {\r\n      setDataSource(response.data)\r\n    }).catch(() => console.log('Get roleList failed'))\r\n\r\n    axios.get('/api/getMenuList').then((response) => {\r\n      setTreeData(response.data)\r\n    }).catch(error => console.log('get rights info fail', error))\r\n  }, [])\r\n  const columns = [\r\n    {\r\n      title: 'Id',\r\n      dataIndex: 'id'\r\n    },\r\n    {\r\n      title: '角色名称',\r\n      dataIndex: 'roleName'\r\n    },\r\n    {\r\n      title: '操作',\r\n      render: (item) => {\r\n        const deleteRole = () => {\r\n          confirm({\r\n            title: '确定要删除吗？',\r\n            icon: <ExclamationCircleOutlined />,\r\n            okText: '确认',\r\n            cancelText: '取消',\r\n            onOk() {\r\n              axios.post('/api/deleteRole', { id: item.id }).then(() => {\r\n                setDataSource(dataSource.filter(data => data.id !== item.id))\r\n              }).catch(() => console.log('Delete role failed'))\r\n            },\r\n          });\r\n        }\r\n        const handleOk = () => {\r\n          setIsShow(false)\r\n          let list = dataSource.filter(data => data.id === currentId)\r\n          list[0].rights = current\r\n          setDataSource([...dataSource])\r\n          axios.post('/api/changeRoleRights', { id: currentId, rights: current })\r\n            .catch(error => console.log('change role rights failed'))\r\n        }\r\n        const handleCancel = () => {\r\n          setIsShow(false)\r\n        }\r\n        const onCheck = (keys) => {\r\n          setCurrent(keys.checked)\r\n        }\r\n        return <div>\r\n          <Button type='primary' icon={<EditOutlined />}\r\n            style={{ marginRight: '10px' }}\r\n            onClick={() => {\r\n              setIsShow(true)\r\n              setCurrent(item.rights)\r\n              setCurrentId(item.id)\r\n            }}>\r\n          </Button>\r\n          <Button type='danger' icon={<DeleteOutlined />} onClick={deleteRole}></Button>\r\n          <Modal title=\"权限分配\" visible={isShow} onOk={handleOk} onCancel={handleCancel}>\r\n            <Tree treeData={treeData} checkable checkedKeys={current} onCheck={onCheck} checkStrictly></Tree>\r\n          </Modal>\r\n        </div>\r\n      }\r\n    }\r\n  ]\r\n  return (\r\n    <div>\r\n      <Table dataSource={dataSource} columns={columns} rowKey={item => item.id}></Table>\r\n    </div>\r\n  )\r\n}\r\n","// This icon file is generated automatically.\nvar DeleteOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\" } }] }, \"name\": \"delete\", \"theme\": \"outlined\" };\nexport default DeleteOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DeleteOutlinedSvg from \"@ant-design/icons-svg/es/asn/DeleteOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DeleteOutlined = function DeleteOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: DeleteOutlinedSvg\n  }));\n};\n\nDeleteOutlined.displayName = 'DeleteOutlined';\nexport default /*#__PURE__*/React.forwardRef(DeleteOutlined);","// This icon file is generated automatically.\nvar EditOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z\" } }] }, \"name\": \"edit\", \"theme\": \"outlined\" };\nexport default EditOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport EditOutlinedSvg from \"@ant-design/icons-svg/es/asn/EditOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar EditOutlined = function EditOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: EditOutlinedSvg\n  }));\n};\n\nEditOutlined.displayName = 'EditOutlined';\nexport default /*#__PURE__*/React.forwardRef(EditOutlined);"],"names":["confirm","Modal","RoleList","useState","dataSource","setDataSource","isShow","setIsShow","treeData","setTreeData","current","setCurrent","currentId","setCurrentId","useEffect","axios","then","response","data","catch","console","log","error","columns","title","dataIndex","render","item","type","icon","style","marginRight","onClick","rights","id","okText","cancelText","onOk","filter","visible","onCancel","checkable","checkedKeys","onCheck","keys","checked","checkStrictly","rowKey","DeleteOutlined","props","ref","React","AntdIcon","_objectSpread","DeleteOutlinedSvg","displayName","EditOutlined","EditOutlinedSvg"],"sourceRoot":""}